{"title":"antd按需加载","date":"2019-06-15T15:18:05.000Z","link":"post/antd按需加载","updated":"2019-06-15T16:49:55.198Z","content":"<h1 id=\"antd按需加载\">antd按需加载<a href=\"post/antd按需加载#antd按需加载\"></a></h1><p>antd中如果直接使用 <code>import {Button} from &#39;antd&#39;</code>来引入组件，则会将整个antd都引入到项目中，这会导致打包出来的文件非常大。我们希望的是只打包我们能使用到的模块。</p>\n<p>如何按需加载？</p>\n<h2 id=\"引入模块和样式\">引入模块和样式<a href=\"post/antd按需加载#引入模块和样式\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import Button from &apos;antd/lib/button&apos;;  </span><br><span class=\"line\">import &apos;antd/lib/button/style&apos;;</span><br></pre></td></tr></table></figure>\n<p>这样可以只引入Button模块，但是写起来有点复杂。</p>\n<h2 id=\"使用-babel-plugin-import\">使用 babel-plugin-import<a href=\"post/antd按需加载#使用-babel-plugin-import\"></a></h2><p>这是一个babel插件，它做的事情其实是帮我们把<br><code>import {Button} from &#39;antd&#39;</code><br>这种写法转化成第一种写法，从而实现了按需加载。</p>\n<p>使用该插件需要在babel配置文件中写入如下配置。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;plugins&quot;: [</span><br><span class=\"line\">    [&quot;import&quot;, &#123;</span><br><span class=\"line\">      &quot;libraryName&quot;: &quot;antd&quot;,</span><br><span class=\"line\">      &quot;libraryDirectory&quot;: &quot;es&quot;,</span><br><span class=\"line\">      &quot;style&quot;: true</span><br><span class=\"line\">    &#125;]</span><br><span class=\"line\">  ]</span><br></pre></td></tr></table></figure></p>\n<p>其中需要注意的是style属性的值，有<strong>css</strong> 和 <strong>true</strong>两个值。</p>\n<h3 id=\"style：’css’-与-style：true\">style：’css’ 与 style：true<a href=\"post/antd按需加载#style：’css’-与-style：true\"></a></h3><p>style属性的这两个值分别代表着什么呢？</p>\n<p>其实这两个值分别代表的是<strong>引入antd的less样式文件还是css样式文件</strong>。</p>\n<p><code>style: &#39;css&#39;</code>表示引入的是.css样式文件，而<code>style: true</code>表示引入的是.less样式文件。</p>\n<p>而这又有什么区别呢？</p>\n<p>其实在babel-plugin-import官网中已经有描述。</p>\n<div class=\"article-img\"><p><img src=\"/.com//1.jpg\" alt data-zoomable></p></div>\n<p>在使用了该插件的style属性之后，antd打包时会有一些全局样式被打包进来。</p>\n<div class=\"article-img\"><p><img src=\"/.com//2.jpg\" alt data-zoomable></p></div>\n<p>而引入的全部样式.less 和 .css中，.less文件会明显小于.css文件。</p>\n<p>下面是一个项目中bundle图表，分别使用<code>style: true</code>（上图）和<code>style: &#39;css&#39;</code>（下图）的对比。</p>\n<p><em>style: true</em><br><img src=\"/.com//3.jpg\" alt></p>\n<p><em>style: ‘css’</em><br><img src=\"/.com//4.jpg\" alt></p>\n<h2 id=\"总结\">总结<a href=\"post/antd按需加载#总结\"></a></h2><p>为了对antd组件进行按需加载，需要引入一个babel插件<strong>babel-plugin-import</strong>。 如果对打包后的文件大小有要求，应该设置属性<code>style: true</code>来引入.less文件，不过此时需要在webpack中添加处理less的loader。</p>\n","next":{"title":"Hello World","link":"post/hello-world"},"plink":"http://yoursite.com/post/antd按需加载/","toc":[{"title":"antd按需加载","id":"antd按需加载","index":"1","children":[{"title":"引入模块和样式","id":"引入模块和样式","index":"1.1"},{"title":"使用 babel-plugin-import","id":"使用-babel-plugin-import","index":"1.2","children":[{"title":"style：’css’ 与 style：true","id":"style：’css’-与-style：true","index":"1.2.1"}]},{"title":"总结","id":"总结","index":"1.3"}]}]}